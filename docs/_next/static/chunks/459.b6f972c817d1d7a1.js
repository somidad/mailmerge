(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{9459:function(t,e,r){var o;/*!
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */self,o=(t,e,r)=>(()=>{"use strict";var o={546:t=>{t.exports=r},949:t=>{t.exports=e},155:e=>{e.exports=t}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={exports:{}};return o[t](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{CKEditor:()=>d,CKEditorContext:()=>u,useMultiRootEditor:()=>j});var t=i(155),e=i.n(t),r=i(949),o=i.n(r);let n=Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));var s=i(546);let c=e().createContext("contextWatchdog");class u extends e().Component{constructor(t,e){super(t,e),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(t){return this._shouldComponentUpdate(t)}async _shouldComponentUpdate(t){return t.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(t.config)),t.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(t.config),!0):this.props.children!==t.children}render(){return e().createElement(c.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(t){this.contextWatchdog=new s.ContextWatchdog(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(t,e)=>{this.props.onError(e.error,{phase:"runtime",willContextRestart:e.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{"ready"===this.contextWatchdog.state&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(t).catch(t=>{this.props.onError(t,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}u.defaultProps={isLayoutReady:!0,onError:(t,e)=>console.error(t,e)},u.propTypes={id:o().string,isLayoutReady:o().bool,context:o().func,watchdogConfig:o().object,config:o().object,onReady:o().func,onError:o().func};class l{constructor(t,e){var r;let o;this._releaseLock=null,this._value=null,this._afterMountCallbacks=[],this._state={destroyedBeforeInitialization:!1,mountingInProgress:null},this.release=(r=()=>{let{_releaseLock:t,_state:e,_element:r,_lifecycle:o}=this;e.mountingInProgress?e.mountingInProgress.then(()=>o.unmount({element:r,mountResult:this.value})).catch(t=>{console.error("Semaphore unmounting error:",t)}).then(t.resolve).then(()=>{this._value=null}):(e.destroyedBeforeInitialization=!0,t.resolve())},o=null,(...t)=>(o||(o={current:r(...t)}),o.current)),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){let{_value:e,_afterMountCallbacks:r}=this;e?t(e):r.push(t)}_lock(){let{_semaphores:t}=l,{_state:e,_element:r,_lifecycle:o}=this,n=t.get(r)||Promise.resolve(null),i=function(){let t={resolve:null,promise:null};return t.promise=new Promise(e=>{t.resolve=e}),t}();this._releaseLock=i;let a=n.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=o.mount().then(t=>(t&&this.unsafeSetValue(t),t)),e.mountingInProgress)).then(async t=>{t&&o.afterMount&&await o.afterMount({element:r,mountResult:t})}).then(()=>i.promise).catch(t=>{console.error("Semaphore mounting error:",t)}).then(()=>{t.get(r)===a&&t.delete(r)});t.set(r,a)}}l._semaphores=new Map;let h="Lock from React integration (@ckeditor/ckeditor5-react)";class d extends e().Component{constructor(t){super(t),this.domContainer=e().createRef(),this.editorSemaphore=null;let{CKEDITOR_VERSION:r}=window;if(r){let[t]=r.split(".").map(Number);t<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get _semaphoreValue(){let{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){let{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){let{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){let{props:e,editorSemaphore:r}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog||(r&&(r.runAfterMount(({instance:r})=>{this._shouldUpdateEditorData(e,t,r)&&r.data.set(t.data)}),"disabled"in t&&r.runAfterMount(({instance:e})=>{t.disabled?e.enableReadOnlyMode(h):e.disableReadOnlyMode(h)})),!1)}componentDidMount(){this._initLifeCycleSemaphore()}componentDidUpdate(){this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new l(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{let{onReady:e}=this.props;e&&null!==this.domContainer.current&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{let{onAfterDestroy:r}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{r&&r(e.instance)}}})}render(){return e().createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};let t=this.context instanceof s.ContextWatchdog?new f(this.context):new d._EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(r,o)=>{let{editorSemaphore:n}=this,{onAfterDestroy:i}=this.props;e.current>0&&i&&n&&n.value&&n.value.instance&&i(n.value.instance);let a=await this._createEditor(r,o);return e.current>0&&(n.unsafeSetValue({instance:a,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,a}),t.on("error",(t,{error:e,causesRestart:r})=>{(this.props.onError||console.error)(e,{phase:"runtime",willEditorRestart:r})}),await t.create(this.domContainer.current,this._getConfig()).catch(t=>{(this.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){return this.props.editor.create(t,e).then(t=>{"disabled"in this.props&&this.props.disabled&&t.enableReadOnlyMode(h);let e=t.model.document,r=t.editing.view.document;return e.on("change:data",e=>{this.props.onChange&&this.props.onChange(e,t)}),r.on("focus",e=>{this.props.onFocus&&this.props.onFocus(e,t)}),r.on("blur",e=>{this.props.onBlur&&this.props.onBlur(e,t)}),t})}async _destroyEditor(t){let{watchdog:e,instance:r}=t;return new Promise((t,o)=>{setTimeout(async()=>{try{if(e)return await e.destroy(),t();if(r)return await r.destroy(),t();t()}catch(t){console.error(t),o(t)}})})}_shouldUpdateEditorData(t,e,r){return t.data!==e.data&&r.data.get()!==e.data}_getConfig(){let t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}d.contextType=c,d.propTypes={editor:o().func.isRequired,data:o().string,config:o().object,disableWatchdog:o().bool,watchdogConfig:o().object,onChange:o().func,onReady:o().func,onFocus:o().func,onBlur:o().func,onError:o().func,disabled:o().bool,id:o().any},d._EditorWatchdog=s.EditorWatchdog;class f{constructor(t){this._contextWatchdog=t,this._id=function(){let t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0;return"e"+n[255&t]+n[t>>8&255]+n[t>>16&255]+n[t>>24&255]+n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+n[255&r]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]+n[255&o]+n[o>>8&255]+n[o>>16&255]+n[o>>24&255]}()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(t,{itemId:r,error:o})=>{r===this._id&&e(null,{error:o,causesRestart:void 0})})}destroy(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}function p(...t){return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}}function _(t,e){for(let t of Object.getOwnPropertyNames(e))delete e[t];for(let[r,o]of Object.entries(t))o!==e&&"prototype"!==r&&"__proto__"!==r&&(e[r]=o);return e}let g=e=>{let r=(0,t.useRef)();return r.current=e,(0,t.useCallback)((...t)=>r.current(...t),[])};function y(t,e){return e.length=0,e.push(...t),e}let m=(e,r,o)=>{((e,r)=>{let o=(0,t.useRef)(null);((t,e)=>{if(t===e)return!0;if(!t||!e)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(o.current,r)||(o.current=[...r],e())})(()=>{e&&e.runAfterMount(r)},[e,...o])},b="Lock from React integration (@ckeditor/ckeditor5-react)",v=(0,t.memo)((0,t.forwardRef)(({id:r,semaphore:o,rootName:n},i)=>{let a=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let t,e;return o.runAfterMount(({instance:r})=>{a.current&&(e=r,t=r.ui.view.createEditable(n,a.current),r.ui.addEditable(t),r.editing.view.forceRender())}),()=>{t&&a.current&&e&&"destroyed"!==e.state&&e.ui.removeEditable(t)}},[o.revision]),e().createElement("div",{key:o.revision,id:r,ref:p(i,a)})}));v.displayName="EditorEditable";let w=(0,t.forwardRef)(({editor:r},o)=>{let n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let t=n.current;if(!r||!t)return;let e=r.ui.view.toolbar.element;return t&&t.appendChild(e),()=>{t&&t.removeChild(e)}},[r&&r.id]),e().createElement("div",{ref:p(n,o)})});w.displayName="EditorToolbarWrapper";let j=r=>{let o=(0,t.useRef)(r.semaphoreElement||null),n=(()=>{let e=(0,t.useRef)(null),[r,o]=(0,t.useState)(()=>Date.now()),n=()=>{o(Date.now())},i=(t=!0)=>{e.current&&(e.current.release(),e.current=null),t&&o(Date.now())},a=t=>{e.current&&e.current.runAfterMount(t)};return{get current(){return e.current},revision:r,createAttributeRef:t=>({get current(){return e.current&&e.current.value?e.current.value[t]:null}}),unsafeSetValue:t=>{var r;null===(r=e.current)||void 0===r||r.unsafeSetValue(t),n()},release:i,replace:t=>{i(!1),e.current=t(),n(),a(n)},runAfterMount:a}})(),i={watchdog:n.createAttributeRef("watchdog"),instance:n.createAttributeRef("instance")},a=(0,t.useContext)(c),[u,h]=(0,t.useState)(()=>Object.keys(r.data)),[d,p]=(0,t.useState)({...r.data}),[j,E]=(0,t.useState)({...r.rootsAttributes}),x=(0,t.useRef)(!0);(0,t.useEffect)(()=>{let t=o.current;if(t&&!1!==r.isLayoutReady)return n.replace(()=>new l(t,{mount:T,afterMount:({mountResult:t})=>{let{onReady:e}=r;e&&null!==o.current&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{let{onAfterDestroy:o}=r;try{await P(e),t.innerHTML=""}finally{o&&o(e.instance)}}})),()=>{n.release(!1)}},[r.id,r.isLayoutReady]);let O=()=>{let t=r.config||{};return r.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),{...t,rootsAttributes:j}},C=g((t,e)=>{let o=t.model.document;if(!r.disableTwoWayDataBinding){let e={},r={};o.differ.getChanges().forEach(r=>{let o;if(!(o="insert"==r.type||"remove"==r.type?r.position.root:r.range.root).isAttached())return;let{rootName:n}=o;e[n]=t.getData({rootName:n})}),o.differ.getChangedRoots().forEach(o=>{if(o.state)return void(void 0!==e[o.name]&&delete e[o.name]);let n=o.name;r[n]=t.getRootAttributes(n)}),Object.keys(e).length&&p(t=>({...t,...e})),Object.keys(r).length&&E(t=>({...t,...r}))}r.onChange&&r.onChange(e,t)}),S=g((t,e,o)=>{let n=o.rootName;r.disableTwoWayDataBinding||(p(e=>({...e,[n]:t.getData({rootName:n})})),E(e=>({...e,[n]:t.getRootAttributes(n)}))),h(t=>Array.from(new Set([...t,o.rootName])))}),R=g((t,e,o)=>{let n=o.rootName;r.disableTwoWayDataBinding||(p(t=>{let{[n]:e,...r}=t;return{...r}}),E(t=>{let{[n]:e,...r}=t;return{...r}})),h(t=>t.filter(t=>t!==n))}),A=g((t,e)=>(_({...r.rootsAttributes},j),_({...r.data},d),y(Object.keys(r.data),u),r.editor.create(t,e).then(t=>{let e=t.getFullData();_({...e},d),_({...t.getRootsAttributes()},j),y(Object.keys(e),u),r.disabled&&t.enableReadOnlyMode(b);let o=t.model.document,n=t.editing.view.document;return o.on("change:data",e=>C(t,e)),t.on("addRoot",(e,r)=>S(t,e,r)),t.on("detachRoot",(e,r)=>R(t,e,r)),n.on("focus",e=>{r.onFocus&&r.onFocus(e,t)}),n.on("blur",e=>{r.onBlur&&r.onBlur(e,t)}),t}))),P=t=>{let{watchdog:e,instance:r}=t;return new Promise((t,o)=>{setTimeout(async()=>{try{if(e)return await e.destroy(),t();if(r)return await r.destroy(),t();t()}catch(t){console.error(t),o(t)}})})},T=async()=>{if(r.disableWatchdog)return{instance:await A(r.data,O()),watchdog:null};let t=a instanceof s.ContextWatchdog?new f(a):new s.EditorWatchdog(r.editor,r.watchdogConfig),e={current:0};return t.setCreator(async(o,a)=>{let{onAfterDestroy:s}=r;e.current>0&&s&&i.instance.current&&s(i.instance.current);let c=await A(o,a);return e.current>0&&(n.unsafeSetValue({instance:c,watchdog:t}),setTimeout(()=>{r.onReady&&r.onReady(t.editor)})),e.current++,c}),t.on("error",(t,{error:e,causesRestart:o})=>{(r.onError||console.error)(e,{phase:"runtime",willEditorRestart:o})}),await t.create(d,O()).catch(t=>{throw(r.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1}),t}),{watchdog:t,instance:t.editor}},k=(0,t.useCallback)(t=>{n.runAfterMount(()=>{x.current=!0,p(t)})},[p]),D=(0,t.useCallback)(t=>{n.runAfterMount(()=>{x.current=!0,E(t)})},[E]),W=e().createElement(w,{ref:o,editor:i.instance.current});m(n.current,({instance:t})=>{r.disabled?t.enableReadOnlyMode(b):t.disableReadOnlyMode(b)},[r.disabled]),m(n.current,({instance:t})=>{if(x.current){x.current=!1;let e=Object.keys(d),r=Object.keys(j);if(!e.every(t=>r.includes(t)))throw console.error("`data` and `attributes` objects must have the same keys (roots)."),Error("`data` and `attributes` objects must have the same keys (roots).");let o=t.getFullData(),n=t.getRootsAttributes(),{addedKeys:i,removedKeys:a}=((t,e)=>{let r=Object.keys(t),o=Object.keys(e);return{addedKeys:o.filter(t=>!r.includes(t)),removedKeys:r.filter(t=>!o.includes(t))}})(o,d||{}),s=e.some(t=>void 0!==o[t]&&JSON.stringify(o[t])!==JSON.stringify(d[t])),c=r.filter(t=>JSON.stringify(n[t])!==JSON.stringify(j[t])),u=e=>{e.forEach(e=>{t.addRoot(e,{data:d[e]||"",attributes:(null==j?void 0:j[e])||{},isUndoable:!0})})},l=e=>{e.forEach(e=>{t.detachRoot(e,!0)})},h=()=>{t.data.set(d,{suppressErrorInCollaboration:!0})},f=(e,r)=>{r.forEach(r=>{Object.keys(j[r]).forEach(e=>{t.registerRootAttribute(e)}),e.clearAttributes(t.model.document.getRoot(r)),e.setAttributes(j[r],t.model.document.getRoot(r))})};setTimeout(()=>{t.model.change(t=>{u(i),l(a),s&&h(),c.length&&f(t,c)})})}},[d,j]);let N=u.map(t=>e().createElement(v,{key:t,id:t,rootName:t,semaphore:n}));return{editor:i.instance.current,editableElements:N,toolbarElement:W,data:d,setData:k,attributes:j,setAttributes:D}}})(),a})(),t.exports=o(r(2265),r(1448),r(1973))},9949:function(t,e,r){"use strict";var o=r(6793);function n(){}function i(){}i.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,i,a){if(a!==o){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},1448:function(t,e,r){t.exports=r(9949)()},6793:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1973:function(t,e,r){"use strict";r.r(e),r.d(e,{ContextWatchdog:function(){return e$},EditorWatchdog:function(){return eV},Watchdog:function(){return o}});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o{constructor(t){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let e="error"in t?t.error:t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){for(let r of this._listeners[t]||[])r.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});let r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function n(t,e=new Set){let r=[t],o=new Set,n=0;for(;r.length>n;){let t=r[n++];if(!(o.has(t)||!function(t){let e=Object.prototype.toString.call(t),r=typeof t;return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}(t)||e.has(t))){if(o.add(t),Symbol.iterator in t)try{for(let e of t)r.push(e)}catch(t){}else for(let e in t)"defaultValue"!==e&&r.push(t[e])}}return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function i(t,e,r=new Set){var o;if(t===e&&"object"==typeof(o=t)&&null!==o)return!0;let i=n(t,r),a=n(e,r);for(let t of i)if(a.has(t))return!0;return!1}var a,s=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},c="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),h=function(){return l.Date.now()},d=/\s/,f=function(t){for(var e=t.length;e--&&d.test(t.charAt(e)););return e},p=/^\s+/,_=l.Symbol,g=Object.prototype,y=g.hasOwnProperty,m=g.toString,b=_?_.toStringTag:void 0,v=function(t){var e=y.call(t,b),r=t[b];try{t[b]=void 0;var o=!0}catch(t){}var n=m.call(t);return o&&(e?t[b]=r:delete t[b]),n},w=Object.prototype.toString,j=_?_.toStringTag:void 0,E=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?v(t):w.call(t)},x=function(t){return null!=t&&"object"==typeof t},O=0/0,C=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,R=/^0o[0-7]+$/i,A=parseInt,P=function(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||x(e)&&"[object Symbol]"==E(e))return O;if(s(t)){var e,r,o="function"==typeof t.valueOf?t.valueOf():t;t=s(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=(r=t)?r.slice(0,f(r)+1).replace(p,""):r;var n=S.test(t);return n||R.test(t)?A(t.slice(2),n?2:8):C.test(t)?O:+t},T=Math.max,k=Math.min,D=function(t,e,r){var o,n,i,a,c,u,l=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw TypeError("Expected a function");function _(e){var r=o,i=n;return o=n=void 0,l=e,a=t.apply(i,r)}function g(t){var r=t-u,o=t-l;return void 0===u||r>=e||r<0||f&&o>=i}function y(){var t,r,o,n=h();if(g(n))return m(n);c=setTimeout(y,(t=n-u,r=n-l,o=e-t,f?k(o,i-r):o))}function m(t){return(c=void 0,p&&o)?_(t):(o=n=void 0,a)}function b(){var t,r=h(),i=g(r);if(o=arguments,n=this,u=r,i){if(void 0===c)return l=t=u,c=setTimeout(y,e),d?_(t):a;if(f)return clearTimeout(c),c=setTimeout(y,e),_(u)}return void 0===c&&(c=setTimeout(y,e)),a}return e=P(e)||0,s(r)&&(d=!!r.leading,i=(f="maxWait"in r)?T(P(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),b.cancel=function(){void 0!==c&&clearTimeout(c),l=0,o=u=n=c=void 0},b.flush=function(){return void 0===c?a:m(h())},b},W=function(t,e,r){var o=!0,n=!0;if("function"!=typeof t)throw TypeError("Expected a function");return s(r)&&(o="leading"in r?!!r.leading:o,n="trailing"in r?!!r.trailing:n),D(t,e,{leading:o,maxWait:e,trailing:n})},N=function(t,e){return function(r){return t(e(r))}},M=N(Object.getPrototypeOf,Object),I=Object.prototype,L=Function.prototype.toString,z=I.hasOwnProperty,U=L.call(Object),F=function(t){if(!x(t)||"[object Object]"!=E(t))return!1;var e=M(t);if(null===e)return!0;var r=z.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&L.call(r)==U},B=function(t){return x(t)&&1===t.nodeType&&!F(t)},q=function(t,e){return t===e||t!=t&&e!=e},V=function(t,e){for(var r=t.length;r--;)if(q(t[r][0],e))return r;return -1},J=Array.prototype.splice;function H(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}H.prototype.clear=function(){this.__data__=[],this.size=0},H.prototype.delete=function(t){var e=this.__data__,r=V(e,t);return!(r<0)&&(r==e.length-1?e.pop():J.call(e,r,1),--this.size,!0)},H.prototype.get=function(t){var e=this.__data__,r=V(e,t);return r<0?void 0:e[r][1]},H.prototype.has=function(t){return V(this.__data__,t)>-1},H.prototype.set=function(t,e){var r=this.__data__,o=V(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};var $=function(t){if(!s(t))return!1;var e=E(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},K=l["__core-js_shared__"],Q=(a=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",G=Function.prototype.toString,Y=function(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""},X=/^\[object .+?Constructor\]$/,Z=Object.prototype,tt=Function.prototype.toString,te=Z.hasOwnProperty,tr=RegExp("^"+tt.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=function(t,e){var r,o=null==t?void 0:t[e];return s(r=o)&&(!Q||!(Q in r))&&($(r)?tr:X).test(Y(r))?o:void 0},tn=to(l,"Map"),ti=to(Object,"create"),ta=Object.prototype.hasOwnProperty,ts=Object.prototype.hasOwnProperty;function tc(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}tc.prototype.clear=function(){this.__data__=ti?ti(null):{},this.size=0},tc.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},tc.prototype.get=function(t){var e=this.__data__;if(ti){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return ta.call(e,t)?e[t]:void 0},tc.prototype.has=function(t){var e=this.__data__;return ti?void 0!==e[t]:ts.call(e,t)},tc.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ti&&void 0===e?"__lodash_hash_undefined__":e,this};var tu=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},tl=function(t,e){var r=t.__data__;return tu(e)?r["string"==typeof e?"string":"hash"]:r.map};function th(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function td(t){var e=this.__data__=new H(t);this.size=e.size}th.prototype.clear=function(){this.size=0,this.__data__={hash:new tc,map:new(tn||H),string:new tc}},th.prototype.delete=function(t){var e=tl(this,t).delete(t);return this.size-=e?1:0,e},th.prototype.get=function(t){return tl(this,t).get(t)},th.prototype.has=function(t){return tl(this,t).has(t)},th.prototype.set=function(t,e){var r=tl(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this},td.prototype.clear=function(){this.__data__=new H,this.size=0},td.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},td.prototype.get=function(t){return this.__data__.get(t)},td.prototype.has=function(t){return this.__data__.has(t)},td.prototype.set=function(t,e){var r=this.__data__;if(r instanceof H){var o=r.__data__;if(!tn||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new th(o)}return r.set(t,e),this.size=r.size,this};var tf=function(t,e){for(var r=-1,o=null==t?0:t.length;++r<o&&!1!==e(t[r],r,t););return t},tp=function(){try{var t=to(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),t_=function(t,e,r){"__proto__"==e&&tp?tp(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},tg=Object.prototype.hasOwnProperty,ty=function(t,e,r){var o=t[e];tg.call(t,e)&&q(o,r)&&(void 0!==r||e in t)||t_(t,e,r)},tm=function(t,e,r,o){var n=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],c=o?o(r[s],t[s],s,r,t):void 0;void 0===c&&(c=t[s]),n?t_(r,s,c):ty(r,s,c)}return r},tb=function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o},tv=function(t){return x(t)&&"[object Arguments]"==E(t)},tw=Object.prototype,tj=tw.hasOwnProperty,tE=tw.propertyIsEnumerable,tx=tv(function(){return arguments}())?tv:function(t){return x(t)&&tj.call(t,"callee")&&!tE.call(t,"callee")},tO=Array.isArray,tC="object"==typeof exports&&exports&&!exports.nodeType&&exports,tS=tC&&"object"==typeof module&&module&&!module.nodeType&&module,tR=tS&&tS.exports===tC?l.Buffer:void 0,tA=(tR?tR.isBuffer:void 0)||function(){return!1},tP=/^(?:0|[1-9]\d*)$/,tT=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&tP.test(t))&&t>-1&&t%1==0&&t<e},tk=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},tD={};tD["[object Float32Array]"]=tD["[object Float64Array]"]=tD["[object Int8Array]"]=tD["[object Int16Array]"]=tD["[object Int32Array]"]=tD["[object Uint8Array]"]=tD["[object Uint8ClampedArray]"]=tD["[object Uint16Array]"]=tD["[object Uint32Array]"]=!0,tD["[object Arguments]"]=tD["[object Array]"]=tD["[object ArrayBuffer]"]=tD["[object Boolean]"]=tD["[object DataView]"]=tD["[object Date]"]=tD["[object Error]"]=tD["[object Function]"]=tD["[object Map]"]=tD["[object Number]"]=tD["[object Object]"]=tD["[object RegExp]"]=tD["[object Set]"]=tD["[object String]"]=tD["[object WeakMap]"]=!1;var tW=function(t){return function(e){return t(e)}},tN="object"==typeof exports&&exports&&!exports.nodeType&&exports,tM=tN&&"object"==typeof module&&module&&!module.nodeType&&module,tI=tM&&tM.exports===tN&&c.process,tL=function(){try{var t=tM&&tM.require&&tM.require("util").types;if(t)return t;return tI&&tI.binding&&tI.binding("util")}catch(t){}}(),tz=tL&&tL.isTypedArray,tU=tz?tW(tz):function(t){return x(t)&&tk(t.length)&&!!tD[E(t)]},tF=Object.prototype.hasOwnProperty,tB=function(t,e){var r=tO(t),o=!r&&tx(t),n=!r&&!o&&tA(t),i=!r&&!o&&!n&&tU(t),a=r||o||n||i,s=a?tb(t.length,String):[],c=s.length;for(var u in t)(e||tF.call(t,u))&&!(a&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||tT(u,c)))&&s.push(u);return s},tq=Object.prototype,tV=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tq)},tJ=N(Object.keys,Object),tH=Object.prototype.hasOwnProperty,t$=function(t){if(!tV(t))return tJ(t);var e=[];for(var r in Object(t))tH.call(t,r)&&"constructor"!=r&&e.push(r);return e},tK=function(t){return null!=t&&tk(t.length)&&!$(t)},tQ=function(t){return tK(t)?tB(t):t$(t)},tG=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},tY=Object.prototype.hasOwnProperty,tX=function(t){if(!s(t))return tG(t);var e=tV(t),r=[];for(var o in t)"constructor"==o&&(e||!tY.call(t,o))||r.push(o);return r},tZ=function(t){return tK(t)?tB(t,!0):tX(t)},t0="object"==typeof exports&&exports&&!exports.nodeType&&exports,t1=t0&&"object"==typeof module&&module&&!module.nodeType&&module,t5=t1&&t1.exports===t0?l.Buffer:void 0,t2=t5?t5.allocUnsafe:void 0,t9=function(t,e){if(e)return t.slice();var r=t.length,o=t2?t2(r):new t.constructor(r);return t.copy(o),o},t4=function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e},t6=function(t,e){for(var r=-1,o=null==t?0:t.length,n=0,i=[];++r<o;){var a=t[r];e(a,r,t)&&(i[n++]=a)}return i},t3=function(){return[]},t8=Object.prototype.propertyIsEnumerable,t7=Object.getOwnPropertySymbols,et=t7?function(t){return null==t?[]:t6(t7(t=Object(t)),function(e){return t8.call(t,e)})}:t3,ee=function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t},er=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ee(e,et(t)),t=M(t);return e}:t3,eo=function(t,e,r){var o=e(t);return tO(t)?o:ee(o,r(t))},en=function(t){return eo(t,tQ,et)},ei=function(t){return eo(t,tZ,er)},ea=to(l,"DataView"),es=to(l,"Promise"),ec=to(l,"Set"),eu=to(l,"WeakMap"),el="[object Map]",eh="[object Promise]",ed="[object Set]",ef="[object WeakMap]",ep="[object DataView]",e_=Y(ea),eg=Y(tn),ey=Y(es),em=Y(ec),eb=Y(eu),ev=E;(ea&&ev(new ea(new ArrayBuffer(1)))!=ep||tn&&ev(new tn)!=el||es&&ev(es.resolve())!=eh||ec&&ev(new ec)!=ed||eu&&ev(new eu)!=ef)&&(ev=function(t){var e=E(t),r="[object Object]"==e?t.constructor:void 0,o=r?Y(r):"";if(o)switch(o){case e_:return ep;case eg:return el;case ey:return eh;case em:return ed;case eb:return ef}return e});var ew=ev,ej=Object.prototype.hasOwnProperty,eE=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ej.call(t,"index")&&(r.index=t.index,r.input=t.input),r},ex=l.Uint8Array,eO=function(t){var e=new t.constructor(t.byteLength);return new ex(e).set(new ex(t)),e},eC=function(t,e){var r=e?eO(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},eS=/\w*$/,eR=function(t){var e=new t.constructor(t.source,eS.exec(t));return e.lastIndex=t.lastIndex,e},eA=_?_.prototype:void 0,eP=eA?eA.valueOf:void 0,eT=function(t,e){var r=e?eO(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ek=function(t,e,r){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return eO(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return eC(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return eT(t,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return eR(t);case"[object Symbol]":return eP?Object(eP.call(t)):{}}},eD=Object.create,eW=function(){function t(){}return function(e){if(!s(e))return{};if(eD)return eD(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),eN=tL&&tL.isMap,eM=eN?tW(eN):function(t){return x(t)&&"[object Map]"==ew(t)},eI=tL&&tL.isSet,eL=eI?tW(eI):function(t){return x(t)&&"[object Set]"==ew(t)},ez="[object Arguments]",eU="[object Function]",eF="[object Object]",eB={};eB[ez]=eB["[object Array]"]=eB["[object ArrayBuffer]"]=eB["[object DataView]"]=eB["[object Boolean]"]=eB["[object Date]"]=eB["[object Float32Array]"]=eB["[object Float64Array]"]=eB["[object Int8Array]"]=eB["[object Int16Array]"]=eB["[object Int32Array]"]=eB["[object Map]"]=eB["[object Number]"]=eB[eF]=eB["[object RegExp]"]=eB["[object Set]"]=eB["[object String]"]=eB["[object Symbol]"]=eB["[object Uint8Array]"]=eB["[object Uint8ClampedArray]"]=eB["[object Uint16Array]"]=eB["[object Uint32Array]"]=!0,eB["[object Error]"]=eB[eU]=eB["[object WeakMap]"]=!1;var eq=function t(e,r,o,n,i,a){var c,u=1&r,l=2&r,h=4&r;if(o&&(c=i?o(e,n,i,a):o(e)),void 0!==c)return c;if(!s(e))return e;var d=tO(e);if(d){if(c=eE(e),!u)return t4(e,c)}else{var f,p,_,g,y=ew(e),m=y==eU||"[object GeneratorFunction]"==y;if(tA(e))return t9(e,u);if(y==eF||y==ez||m&&!i){if(c=l||m?{}:"function"!=typeof e.constructor||tV(e)?{}:eW(M(e)),!u)return l?(p=(f=c)&&tm(e,tZ(e),f),tm(e,er(e),p)):(g=(_=c)&&tm(e,tQ(e),_),tm(e,et(e),g))}else{if(!eB[y])return i?e:{};c=ek(e,y,u)}}a||(a=new td);var b=a.get(e);if(b)return b;a.set(e,c),eL(e)?e.forEach(function(n){c.add(t(n,r,o,n,e,a))}):eM(e)&&e.forEach(function(n,i){c.set(i,t(n,r,o,i,e,a))});var v=h?l?ei:en:l?tZ:tQ,w=d?void 0:v(e);return tf(w||e,function(n,i){w&&(n=e[i=n]),ty(c,i,t(n,r,o,i,e,a))}),c};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eV extends o{constructor(t,e={}){super(e),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=W(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),t&&(this._creator=(e,r)=>t.create(e,r)),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{let t={},e=[],r=this._config.rootsAttributes||{},o={};for(let[n,i]of Object.entries(this._data.roots))i.isLoaded?(t[n]="",o[n]=r[n]||{}):e.push(n);let n={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:e,rootsAttributes:o,_watchdogInitialData:this._data};return(delete n.initialData,n.extraPlugins.push(eJ),this._initUsingData)?this.create(t,n,n.context):B(this._elementOrData)?this.create(this._elementOrData,n,n.context):this.create(this._editables,n,n.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,r){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData="string"==typeof t||Object.keys(t).length>0&&"string"==typeof Object.values(t)[0],this._config=this._cloneEditorConfiguration(e)||{},this._config.context=r,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){let t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){let t=this._editor,e=t.model.document.roots.filter(t=>t.isAttached()&&"$graveyard"!=t.rootName),{plugins:r}=t,o=r.has("CommentsRepository")&&r.get("CommentsRepository"),n=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};for(let r of(e.forEach(t=>{i.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}}),t.model.markers))r._affectsData&&(i.markers[r.name]={rangeJSON:r.getRange().toJSON(),usingOperation:r._managedUsingOperations,affectsData:r._affectsData});return o&&(i.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),n&&(i.suggestions=JSON.stringify(n.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}_getEditables(){let t={};for(let e of this.editor.model.document.getRootNames()){let r=this.editor.ui.getEditableElement(e);r&&(t[e]=r)}return t}_isErrorComingFromThisItem(t){return i(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){var e;return eq(t,5,e="function"==typeof(e=(t,e)=>{if(B(t)||"context"===e)return t})?e:void 0)}}class eJ{constructor(t){this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if(!("name"in e))return t.createText(e.data,e.attributes);{let r=t.createElement(e.name,e.attributes);if(e.children)for(let o of e.children)r._appendChild(this._createNode(t,o));return r}}_restoreEditorData(t){let e=this.editor;Object.entries(this._data.roots).forEach(([r,{content:o,attributes:n}])=>{let i=JSON.parse(o),a=JSON.parse(n),s=e.model.document.getRoot(r);for(let[e,r]of a)t.setAttribute(e,r,s);for(let e of i){let r=this._createNode(t,e);t.insert(r,s,"end")}}),Object.entries(this._data.markers).forEach(([r,o])=>{let{document:n}=e.model,{rangeJSON:{start:i,end:a},...s}=o,c=n.getRoot(i.root),u=t.createPositionFromPath(c,i.path,i.stickiness),l=t.createPositionFromPath(c,a.path,a.stickiness),h=t.createRange(u,l);t.addMarker(r,{range:h,...s})})}_restoreCollaborationData(){let t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(t=>{let e=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(t.threadId)&&r.getCommentThread(t.threadId).remove(),r.addCommentThread({channelId:e,...t})}),e.forEach(t=>{let e=this.editor.plugins.get("TrackChangesEditing");e.hasSuggestion(t.id)?e.getSuggestion(t.id).attributes=t.attributes:e.addSuggestionData(t)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let eH=Symbol("MainQueueId");class e$ extends o{constructor(t,e={}){super(e),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new eK,this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=t=>t.destroy(),this._actionQueues.onEmpty(()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(eH,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){return Promise.all(eQ(t).map(t=>this._actionQueues.enqueue(t.id,()=>{let e;if("destroyed"===this.state)throw Error("Cannot add items to destroyed watchdog.");if(!this._context)throw Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");if(this._watchdogs.has(t.id))throw Error(`Item with the given id is already added: '${t.id}'.`);if("editor"===t.type)return(e=new eV(null,this._watchdogConfig)).setCreator(t.creator),e._setExcludedProperties(this._contextProps),t.destructor&&e.setDestructor(t.destructor),this._watchdogs.set(t.id,e),e.on("error",(r,{error:o,causesRestart:n})=>{this._fire("itemError",{itemId:t.id,error:o}),n&&this._actionQueues.enqueue(t.id,()=>new Promise(r=>{let o=()=>{e.off("restart",o),this._fire("itemRestart",{itemId:t.id}),r()};e.on("restart",o)}))}),e.create(t.sourceElementOrData,t.config,this._context);throw Error(`Not supported item type: '${t.type}'.`)})))}remove(t){return Promise.all(eQ(t).map(t=>this._actionQueues.enqueue(t,()=>{let e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))}destroy(){return this._actionQueues.enqueue(eH,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(eH,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=n(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){let e=this._watchdogs.get(t);if(!e)throw Error(`Item with the given id was not registered: ${t}.`);return e}_isErrorComingFromThisItem(t){for(let e of this._watchdogs.values())if(e._isErrorComingFromThisItem(t))return!1;return i(this._context,t.context)}}class eK{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){let r=t===eH;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());let o=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(eH),this._queues.get(t)])).then(e),n=o.catch(()=>{});return this._queues.set(t,n),o.finally(()=>{this._activeActions--,this._queues.get(t)===n&&0===this._activeActions&&this._onEmptyCallbacks.forEach(t=>t())})}}function eQ(t){return Array.isArray(t)?t:[t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */}}]);